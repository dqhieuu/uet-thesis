% \usepackage[vietnamese]{babel}
\usepackage[english]{babel}
% times new roman like font
\usepackage{newtxtext,newtxmath}

\usepackage{fancyhdr}
\usepackage{array}
\newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}}

% citation
\usepackage[backend=biber,style=ieee]{biblatex}
\addbibresource{ref.bib}

% FOR PAPER PRINTING
\usepackage[a4paper, top=2.5cm, bottom=3cm, left=3cm, right=2cm]{geometry}
% FOR PDF
% \usepackage[a4paper, margin=2.5cm]{geometry}

\usepackage{etoolbox}
% \usepackage[dvipsnames]{xcolor}
\usepackage{listings}
\usepackage{enumerate}
\renewcommand{\labelenumii}{\theenumii}
\renewcommand{\theenumii}{\theenumi.\arabic{enumii}.}

\usepackage{textgreek}
\usepackage{tabularx}
\usepackage{graphicx}
\usepackage{multicol}
\usepackage{csquotes}
\setquotestyle{english}
\usepackage{subfiles}
\usepackage{lipsum}

\usepackage{tikz}
\usetikzlibrary{calc}
\usepackage{plantuml}
\usepackage{eso-pic}



\usepackage{glossaries}
\usepackage[automake]{glossaries-extra}
\makeglossaries
% Automate the process

\newcommand*{\newglsen}[4]{%
    \newglossaryentry{#1}%
    {%
        name = {#2},%
        first = {\textbf{#2} (#3)},%
        description = {(#3) #4}%
    }%
}

\newcommand*{\newglslinked}[5]{%
\newglossaryentry{#1}%
{%
name = {#2},%
first = {\textbf{#2} (#3)},%
description = {(#3) #4}%
see = {#5}
}%
}

\newcommand*{\newgls}[3]{%Gg
    \newglossaryentry{#1}%
    {%
        name = {#2},%
        first = {\textbf{#2}},%
        description = {#3}%
    }%
}

% Wikipedia-style "citation needed" macro
\newcommand{\citationneeded}[1][]{\textsuperscript{\color{blue} [citation needed: #1]}}

\usepackage[strict]{changepage}
\usepackage[pagebackref=false]{hyperref}

\usepackage[nottoc,notlot,notlof]{tocbibind}
\usepackage{setspace}
\usepackage[skip=6pt plus1pt, indent=1cm]{parskip}
\usepackage{float}
\usepackage{indentfirst}
\usepackage{subfigure}
\usepackage[justification=centering]{caption}
\usepackage{hhline}
\usepackage{scrextend}
% \usepackage[inkscapelatex=false]{svg}
% \svgpath{{../images/}}
\usepackage[most]{tcolorbox}
\definecolor{block-gray}{gray}{0.85}

\usepackage{varioref} % More descriptive referencing

\usepackage{url}
\def\UrlBreaks{\do\/\do-}
% \usepackage{breakurl}

\setstretch{1.3}
\renewcommand{\arraystretch}{1.5}

% \usepackage{epstopdf}
% \epstopdfDeclareGraphicsRule{.svg}{pdf}{.pdf}{
%   inkscape -z --file=#1 --export-pdf=\OutputFile
% }



% \hypersetup{
%     colorlinks=true,
%     allcolors=blue, 
%     bookmarks=true
% }
\urlstyle{same}

\lstset{
    basicstyle=\ttfamily,
    language=Java,
    keywordstyle=\color{Blue},
    tabsize=4,
    captionpos=b,
    breaklines=true,
    showstringspaces=false
}

\pagecolor{white}


% \pagestyle{fancy}
% \lhead{\appfullname}
% \chead{}
% \rhead{}
% \lfoot{}
% \cfoot{\thepage}
% \rfoot{}

\usepackage[scaled]{helvet}

\usepackage[explicit]{titlesec}
\titleclass{\subsubsubsection}{straight}[\subsection]
\titleformat{\section}[display]{\raggedleft\Large}{Chapter \thesection \\
    \vspace{1.5em}
    \bfseries\MakeUppercase{#1}}{0em}{}
\titleformat{name=\section,numberless}{\Large\bfseries\centering\MakeUppercase}{#1}{0em}{}


\newcounter{subsubsubsection}[subsubsection]
\renewcommand\thesubsubsubsection{\thesubsubsection.\arabic{subsubsubsection}}
\renewcommand\theparagraph{\thesubsubsubsection.\arabic{paragraph}} % optional; useful if paragraphs are to be numbered

\titleformat{\subsubsubsection}
{\normalfont\small\bfseries}{\thesubsubsubsection \hspace{0.5em} #1}{1em}{}
\titlespacing*{\subsubsubsection}
{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}

\makeatletter
% \adddialect\l@VIETNAMESE\l@vietnamese
\newcommand\thefontsize[1]{{#1 The current font size is: \f@size pt\par}}
\renewcommand\paragraph{\@startsection{paragraph}{5}{\z@}%
    {3.25ex \@plus1ex \@minus.2ex}%
    {-1em}%
    {\normalfont\normalsize\bfseries}}
\renewcommand\subparagraph{\@startsection{subparagraph}{6}{\parindent}%
    {3.25ex \@plus1ex \@minus .2ex}%
    {-1em}%
    {\normalfont\normalsize\bfseries}}
\def\toclevel@subsubsubsection{4}
\def\toclevel@paragraph{5}
\def\toclevel@paragraph{6}
\def\l@subsubsubsection{\@dottedtocline{4}{7em}{4em}}
\def\l@paragraph{\@dottedtocline{5}{10em}{5em}}
\def\l@subparagraph{\@dottedtocline{6}{14em}{6em}}
\makeatother

\setcounter{secnumdepth}{4}
\setcounter{tocdepth}{4}




% Inline figure
\newcommand{\inlinefigure}[1]{%
    \begingroup\normalfont
    \includegraphics[height=\fontcharht\font`\B]{#1}%
    \endgroup
}

\usepackage{chngcntr}
\counterwithin{figure}{section}

\usepackage{pdfpages}

\usepackage[toc, page]{appendix}
\renewcommand{\appendixtocname}{Phụ lục}
\renewcommand{\appendixpagename}{Phụ lục}
% \newcommand{\appfullname}{}


\graphicspath{ {./images/}, {./body/} }

\newcommand{\includefigure}[2][]{
    \begin{figure}[ht]
        \setlength{\abovecaptionskip}{15pt plus 3pt minus 2pt}
        \centering
        \vspace{1cm}
        \ifstrempty{#1}{
            \includegraphics[width=0.9\textwidth,height=\textheight,keepaspectratio]{#2}
        }{
            \captionsetup{width=0.9\textwidth,font=bf}
            \includegraphics[width=0.9\textwidth,height=0.9\textheight,keepaspectratio]{#2}
            \caption{#1}
            \label{fig:#2}
        }
        \vspace{1cm}
    \end{figure}
}

\newcommand{\includesmallfigure}[2][]{
    \begin{figure}[ht]
        \setlength{\abovecaptionskip}{15pt plus 3pt minus 2pt}
        \centering
        \vspace{1cm}
        \ifstrempty{#1}{
            \includegraphics[width=0.6\textwidth,height=0.6\textheight,keepaspectratio]{#2}
        }{
            \captionsetup{width=0.9\textwidth,font=bf}
            \includegraphics[width=0.6\textwidth,height=0.6\textheight,keepaspectratio]{#2}
            \caption{#1}
            \label{fig:#2}
        }
        \vspace{1cm}
    \end{figure}
}

\newcommand{\includesvgfigure}[2][]{
    \begin{figure}[ht]
        \setlength{\abovecaptionskip}{15pt plus 3pt minus 2pt}
        \centering
        \vspace{1cm}
        \ifstrempty{#1}{
            \includesvg[width=0.9\textwidth,height=0.9\textheight,keepaspectratio]{#2}
        }{
            \captionsetup{width=0.9\textwidth,font=bf}
            \includesvg[width=0.9\textwidth,height=0.9\textheight,keepaspectratio]{#2}
            \caption{#1}
            \label{fig:#2}
        }
    \end{figure}
}


\newcommand{\tablelinebreak}[1]{
    \begin{tabular}[c]{@{}l@{}}
        #1
    \end{tabular}
}

\renewcommand{\cleardoublepage}{
    \clearpage
    \checkoddpage
    \ifoddpage
    \else
        \hbox{}
        \vspace*{\fill}
        \begin{center}
            \textit{Mặt này được để trống}
        \end{center}
        \vspace*{\fill}
        \thispagestyle{empty}
        \newpage
    \fi
}


% Decorative border
\newcommand{\adddecorativeborder}{
    \AddToShipoutPictureBG*{
        \begin{tikzpicture}[overlay,remember picture]
            \draw [line width=3pt]
            ($ (current page.north west) + (2.5cm,-2.0cm) $)
            rectangle
            ($ (current page.south east) + (-1.5cm,1.8cm) $);
            \draw [line width=1pt]
            ($ (current page.north west) + (2.65cm,-2.15cm) $)
            rectangle
            ($ (current page.south east) + (-1.65cm,1.95cm) $);
        \end{tikzpicture}%
    }
}